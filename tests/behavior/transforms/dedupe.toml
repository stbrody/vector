[transforms.dedupe_simple]
  inputs = []
  type = "dedupe"
  fields.match = ["a"]

[[tests]]
  name = "dedupe_simple"
  [[tests.inputs]]
    insert_at = "dedupe_simple"
    type = "log"
    [tests.inputs.log_fields]
      a = 1
      b = 2
  [[tests.inputs]]
    insert_at = "dedupe_simple"
    type = "log"
    [tests.inputs.log_fields]
      a = 1
      b = 3
  [[tests.inputs]]
    insert_at = "dedupe_simple"
    type = "log"
    [tests.inputs.log_fields]
      a = 2
      b = 4
  [[tests.outputs]]
    extract_from = "dedupe_simple"
    [[tests.outputs.conditions]]
      type = "check_fields"
      "a.equals" = 1
      "b.equals" = 2
  [[tests.outputs]]
    extract_from = "dedupe_simple"
    [[tests.outputs.conditions]]
      type = "check_fields"
      "a.equals" = 2
      "b.equals" = 4

[transforms.dedupe_nested_fields]
  inputs = []
  type = "dedupe"
  fields.match = ["a.b.c"]

[[tests]]
  name = "dedupe_nested_fields"
  [[tests.inputs]]
    insert_at = "dedupe_nested_fields"
    type = "log"
    [tests.inputs.log_fields]
      "a.b.c" = "d"
      b = 2
  [[tests.inputs]]
    insert_at = "dedupe_nested_fields"
    type = "log"
    [tests.inputs.log_fields]
      "a.b.c" = "d"
      b = 3
  [[tests.inputs]]
    insert_at = "dedupe_nested_fields"
    type = "log"
    [tests.inputs.log_fields]
      "a.b" = "c.d"
      b = 4
  [[tests.outputs]]
    extract_from = "dedupe_nested_fields"
    [[tests.outputs.conditions]]
      type = "check_fields"
      "a.b.c.equals" = "d"
      "b.equals" = 2
  [[tests.outputs]]
    extract_from = "dedupe_nested_fields"
    [[tests.outputs.conditions]]
      type = "check_fields"
      "a.b.equals" = "c.d"
      "b.equals" = 4
